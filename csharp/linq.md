# Expression Trees, Query Providers, LINQ

LINQ это удобный и, на первый взгляд, простой инструмент для работы с коллекциями данных. Однако то, что на первый взгляд кажется простым, на самом деле скрывает много тонкостей и нюансов. Без их понимания невозможно добиться от LINQ достойной производительности или заточить этот инструмент под какие-то специфичные задачи.

Материалы на этой странице помогут вам разобраться в концепции, устройстве и практическом применении деревьев выражений, провайдеров запросов и LINQ.

## С чего начать?

**[Документация Microsoft по LINQ](https://docs.microsoft.com/ru-ru/dotnet/csharp/programming-guide/concepts/linq/)**

Традиционно входной точкой является документация. Если вам совсем непонятно, что это за LINQ и как к нему подступиться — вводная страница это поясняет. Если у вас возникли вопросы по синтаксису в процессе использования — как правило, там можно найти ответы.

**[Глава о LINQ в курсе на Ulearn](https://ulearn.me/course/basicprogramming2/3446fab2-15df-4045-ab40-abc1f3dc87c8)**

Другой хороший способ разобраться с основами LINQ. Там отлично описываются основные методы и даются вопросы для самопроверки и практические задания.

**[Статья «IEnumerable и IQueryable в Entity Framework»](https://metanit.com/sharp/entityframework/1.4.php)**

Небольшая статья на metanit, показывающая применение интерфейсов IEnumarable и IQueryable в Entity Framework. Там на примере генерируемых SQL запросов отлично показана разница между этими интерфейсами.

## Как это работает?

**[Статья «Принципы работы IQueryable и LINQ-провайдеров данных»](https://habr.com/ru/post/256821/)**

В статье разбираются основные принципы устройства LINQ и реализация собственного простенького аналога IQueryable. На этом примере можно понять, как могут выглядеть LINQ запросы изнутри.

**[Доклад «Реализация своих поставщиков запросов» от Антона Третьякова](https://www.youtube.com/watch?v=QVdfx51mlao)**

Классный обзор того, что же за зверь IQueryProvider, в каких целях его можно использовать и как реализовывать. Очень практичный доклад с множеством примеров кода и практическими кейсами применения.

**[Статья «Implementing a custom LINQ provider»](https://jacopretorius.net/2010/01/implementing-a-custom-linq-provider.html)**

Пример реализации собственного LINQ-провайдера на примере провайдера для файловой системы. Понятная задача, понятный код. Простой способ на базовом уровне понять устройство LINQ-провайдера.

 **[Что такое Expression.Quote и чем это лучше Expression.Constant?](https://stackoverflow.com/questions/3716492/what-does-expression-quote-do-that-expression-constant-can-t-already-do/3753382#3753382)**
 
Отличный ответ на вопрос на stackoverflow, показывающий, как Expression.Quote и Expression.Constant отражаются в деревьях выражений.